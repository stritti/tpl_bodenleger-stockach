(function(e){String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return typeof e[n]!="undefined"?e[n]:t})};var t=e("<ul class='sm-slider'></ul>"),n={init:function(n){var r={src:[],scaling:1.17,rotating:3,duration:6,fade:2,overlay:"images/pattern.png"};e.extend(r,n);this.options=r;var i=this.mkcss(r.src.length,r.duration,r.fade);e('<style type="text/css"></style>').html(i).appendTo("head");t.html(this.mkhtml(r.src)).prependTo("body")},mkhtml:function(e){var t="",n="<li> <span></span> <div> <h3>%title%</h3> </div> </li>";for(var r=0,i=e.length;r<i;r++){var s=e[r].title?e[r].title:"";t+=n.replace("%title%",s)}return t},mkcss:function(e,t,n){var r=t*e,i=n/r*100,s=t/r*100,o=s+i*.6,u=s+i*.3,a="@keyframes imageAnimation {0% {opacity: 0;animation-timing-function: ease-in;}{0}% {opacity: 1;}{1}% {opacity: 1;}{2}% {opacity: 0; animation-timing-function: ease-out;transform: scale(1.17) translateY(-4%) rotateZ(3deg);}100% { opacity: 0;transform: scale(1.17) translateY(-4%) rotateZ(3deg); }} @keyframes titleAnimation {0% { opacity: 0;transform: translateY(-200px); }{0}% { opacity: 1;transform: translateY(0%); }{1}% { opacity: 1;transform: translateY(0%); }{3}% { opacity: 0; transform: scale(0.4) translateY(100%); }100% { opacity: 0; }}".format(i,s,o,u),f=".sm-slider,.sm-slider:after { margin: 0;padding: 0;list-style: none;position: fixed;width: 100%;height: 100%;top: 0px;left: 0px;z-index: -1; }.sm-slider:after { content: '';background: transparent url({0}) repeat top left;z-index: 0; }.sm-slider li span { width: 100%;height: 100%;position: absolute;top: 0px;left: 0px;color: transparent;background-size: cover;background-position: 50% 50%;background-repeat: none;opacity: 0;z-index: 0;animation: imageAnimation {1}s linear infinite 0s; }.sm-slider li div { z-index: 1000;position: absolute;bottom: 30px;left: 0px;width: 100%;text-align: center;opacity: 0;color: #fff;animation: titleAnimation {1}s linear infinite 0s; }".format(this.options.overlay,r),l=a+f,c=this.options.src;for(var h=0;h<e;h++){var p=c[h];l+=".sm-slider li:nth-child({0}) span { background-image: url('{1}');animation-delay: {2}s; } .sm-slider li:nth-child({0}) div { animation-delay: {2}s; }".format(h+1,p.url,t*h)}if(this.options.rotating===false&&this.options.scaling===false){l=l.replace(/transform.*?;/g,"")}else if(this.options.rotating===false){l=l.replace(/rotateZ\(.*?deg\)/g,"")}else if(this.options.scaling===false){l=l.replace(/scale\(.*?\)/g,"")}if(this.options.rotating){l=l.replace(/rotateZ\(.*?\)/g,"rotateZ({0}deg)".format(this.options.rotating))}if(this.options.scaling){l=l.replace(/scale\(.*?\)/g,"scale({0})".format(this.options.scaling))}l=this.addPrefix(l);return l},addPrefix:function(e){var t=/@(keyframes[\s\S]*?100%.*?\{[\s\S]*?\}[\s\S]*?\})/g,n=/(?:animation|transform)[:-].*?;/g;e=e.replace(t,"@-webkit-$1 @-moz-$1 @-ms-$1 @-o-$1 @$1").replace(n,"-webkit-$& -moz-$& -ms-$& -o-$& $&");return e}};e.sublime_slideshow=function(e){n.init(e)}})(jQuery)